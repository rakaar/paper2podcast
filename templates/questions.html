<!doctype html>
<html>
<head>
    <title>Answer Podcast Questions</title>
</head>
<body>
    <h1>Answer a few questions so we can make a podcast for your paper!</h1>
    {% if questions %}
    <form method="post">
        {% for q in questions %}
            <div>
                <label><b>{{ q.q }}</b></label><br>
                {% set qname = 'q_' ~ loop.index0 %}
                {% for opt in q.options %}
                    <input type="radio" name="{{ qname }}" value="{{ opt }}" required> {{ opt }}<br>
                {% endfor %}
            </div>
            <br>
        {% endfor %}
        <input type="hidden" name="questions_json" value="{{ questions|tojson }}">
        <button type="submit">Submit Answers</button>
    </form>
    {% else %}
    <p>No questions to show yet. Please upload a PDF and continue.</p>
    {% endif %}

    {% if gemini_response %}
    <hr>
    <h3>Gemini Raw Response (debug):</h3>
    <pre style="white-space: pre-wrap; word-break: break-word; max-height: 300px; overflow-y: auto; background: #f3f3f3; border: 1px solid #ccc; padding: 8px;">{{ gemini_response }}</pre>
    {% endif %}
    {% if parse_error %}
    <div style="color: red; font-weight: bold;">{{ parse_error }}</div>
    {% endif %}
</body>
</html>
